# project
### 这是一个小型的秒杀系统，后端采用SSM + MySQL + Redis技术，采用JSP + Bootstrap + ajax技术开发用户界面和交互。。
### 业务流程
用户进入秒杀列表页，点击详情查看秒杀商品状态（是否开启秒杀），如果未登录，进入登录界面。然后根据商品的秒杀状态选择是否暴露表示接口。然后点击开始秒杀按钮进行秒杀，然后返回秒杀结果（异步ajax）。

##### 部分类简介
- Seckill:秒杀商品实体类
- SuccessKilled：秒杀成功实体类
- Exposer接口封装类
- SeckillExecution：秒杀结果封装类

#### 秒杀瓶颈分析

1. 查询秒杀商品信息请求。需要连接MySQL进行查询商品信息。而MySQL需要对磁盘进行I/O操作，会浪费大量的时间。
2. 执行秒杀请求。需要两步操作：减库存+插入购买明细。这是个在service中的方法，需要进行事务控制。因为减库存（update）是对行进行操作，所以事务隔离级别为READ_COMMITTED。首先想到是在该方法中先根据插入购买明细的返回结果（如果重复秒杀则失败）决定是回滚还是进行下一步的减库存操作。然后根据减库存的返回结果决定是回滚还是提交。此过程需要Tomcat与MySQL进行交互，如果Tomcat与MySQL不在一台服务器或同一网络中，这之间的交互时间会很多。

#### 秒杀瓶颈优化

1. 查询秒杀商品信息请求。所有采用Redis把秒杀商品信息缓存，首先查询Redis缓存，如果没有则查询数据库。从而提高查询速度。
2. 执行秒杀请求。用MySQL的执行过程进行优化，把该逻辑在MySQL端直接写好，让MySQL直接返回该逻辑的处理状态给service。这样就把Tomcat与MySQL的一或多次交互变成了一次交互。


